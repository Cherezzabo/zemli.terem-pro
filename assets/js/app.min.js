"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),searchAreasHelpers={url:{"default":"/area/"},selects:{select1:[{name:"road",name_text:"Шоссе",values:{v1:"Можайское шоссе",v2:"Киевское шоссе",v3:"Разянское шоссе"}}]},ranges:{range1:[{name:"distance",name_text:"Удаленность от МКАД",type:"км",min_text:"от",max_text:"до",values:{min:10,max:100}}],range2:[{name:"area",name_text:"Размер",type:"м",min_text:"от",max_text:"до",values:{min:6,max:10}}],range3:[{name:"price",name_text:"Цена",type:"р.",min_text:"от",max_text:"до",values:{min:1e5,max:3e6}}]}},searchLotHelpers={url:{"default":"/lots/"},ranges:{range1:[{name:"distance",name_text:"Test",type:"км",min_text:"от",max_text:"до",values:{min:10,max:100}}]}},Filter=function(){function t(e){_classCallCheck(this,t),this.areaObject=searchAreasHelpers,this.lotsObject=searchLotHelpers,this.wrapperFilter=e,this.FormHeader='<form action="" method="" id="filter" class="filter-form">\n   \t\t\t\t\t\t\t<div class="dropdown">\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" name="type" id="typeSearch" value="area" class="hidden">\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn btn-filter btn-lg dropdown-toggle" type="button" id="typeDropdown" data-placeholder="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Участки<span class="my-caret"></span>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul class="dropdown-menu" aria-labelledby="dropdownRoad">\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="arrow-top"></span>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href="#" data-type="area">Участки</a></li>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href="#" data-type="lots">Лоты</a></li>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t</div>',this.FormFooter='<div class="filter-button">\n\t\t\t\t\t\t\t\t<button class="refresh-button">Сбросить</button>\n\t\t\t\t\t\t\t\t<button class="submit-button">Найти</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>',this.FormText="",this.Bind=function(){var t="",e=this.areaObject,a=this.lotsObject,n=this;$(this.wrapperFilter+" > form").bind("click",function(o){var r=$(o.target).attr("id")?$(o.target).attr("id"):$(o.target).attr("data-type");r&&("lots"==r&&(t=a,n.render(t,1)),"area"==r&&(t=e,n.render(t,1)))})},this.onSelectChoose=function(){$(this.wrapperFilter+" li").on("click",function(t){var e=t.target||window.target,a=$(e).html(),n=$(this).parent().prev();n.html(a).prev().val(a)})},this.onRangeChoose=function(){}}return _createClass(t,[{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.areaObject,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&($(this.wrapperFilter).html(" "),this.FormText="",console.log(1),console.log($(this.wrapperFilter))),t.selects)for(var a in t.selects){var n=t.selects[a][0];this.FormText+=this.tmpSelect(n)}if(t.ranges)for(var o in t.ranges){var r=t.ranges[o][0];this.FormText+=this.tmpRange(r)}$(this.wrapperFilter).html(this.FormHeader+" "+this.FormText+this.FormFooter),this.Bind()}},{key:"tmpSelect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=null,a="";if(t&&t.values){for(var n in t.values){var o='<li><a href="#">'+t.values[n]+"</a></li>";a+=o}e='<div class="dropdown">\n\t\t\t\t\t\t\t<input type="text" name="'+t.name+'" value="" class="hidden">\n\t\t\t\t\t\t\t<button class="btn btn-filter btn-lg dropdown-toggle" type="button" id="'+t.name+'Dropdown" data-placeholder="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t\t'+t.name_text+'\n\t\t\t\t\t\t\t\t<span class="my-caret"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<ul class="dropdown-menu" aria-labelledby="dropdownRoad">\n\t\t\t\t\t\t\t\t<span class="arrow-top"></span>\n\t\t\t\t\t\t\t\t'+a+"\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>"}return e}},{key:"tmpRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=null;return t.values&&(e='<div class="dropdown">\n\t\t\t\t\t\t<input type="text" name="'+t.name+'" value="" class="hidden">\n\t\t\t\t\t\t<button class="btn btn-filter btn-lg dropdown-toggle" type="button" id="'+t.name+'Dropdown" data-placeholder="Удаленность от МКАД" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t'+t.name_text+'\n\t\t\t\t\t\t\t<span class="my-caret"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div class="dropdown-menu" aria-labelledby="'+t.name+'Dropdown">\n\t\t\t\t\t\t\t<span class="arrow-top"></span>\n\t\t\t\t\t\t\t<div class="range-box">\n\t\t\t\t\t\t\t\t<input type="number" name="'+t.name+'From" id="'+t.name+'-from" placeholder="'+t.min_text+" "+t.values.min+" "+t.type+'">\n\t\t\t\t\t\t\t\t<input type="number" name="'+t.name+'Upto" id="'+t.name+'-up-to" placeholder="'+t.max_text+" "+t.values.max+" "+t.type+'">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'),e}}]),t}();!function(){var t=function(){function t(e,a,n,o){_classCallCheck(this,t),this.Toggler="#"+n+"-button",this.SliderNav="."+n+"-slider-nav",this.Slider=$('[data-item="'+e+'"]').owlCarousel({loop:!0,margin:1,items:o||1,nav:!0,navContainer:"."+a,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0}),$(this.Slider).hide(),$(this.SliderNav).hide()}return _createClass(t,[{key:"initToggler",value:function(t){$("#"+t).on("click",function(){var t=$(this).attr("id");"#"+t==n.Toggler?(o.hideSlider(),n.showSlider()):(o.showSlider(),n.hideSlider())})}},{key:"onResize",value:function(){function t(t){var e=t.item.count;console.log(e)}$(this.Slider).owlCarousel({onResize:t})}},{key:"activeStateSlider",value:function(){$(this.Slider).show(),$(this.SliderNav).show()}},{key:"activeToggler",value:function(){$(this.Toggler).addClass("success")}},{key:"hideSlider",value:function(){$(this.Toggler).removeClass("success"),$(this.Slider).hide("drop","easeInQuad",200,!1),$(this.SliderNav).hide()}},{key:"showSlider",value:function(){this.Slider.trigger("initialize.owl.carousel"),$(this.Toggler).addClass("success"),$(this.Slider).show("drop","easeInQuad",200,!1),$(this.SliderNav).show()}}]),t}(),e=new Filter(".main-banner__filter");e.render(),e.onSelectChoose();var a=new t("promo-slider","promo-slider-nav");a.activeStateSlider();var n=new t("offer-area-slider","offer-area-slider-nav","offer-area",4);n.activeStateSlider(),n.activeToggler(),n.initToggler("offer-area-button");var o=new t("offer-lot-slider","offer-lot-slider-nav","offer-lot",4);o.initToggler("offer-lot-button")}(),$(document).ready(function(){var t=$(".header__content");t.addClass("opened"),$(window).on("scroll",function(){t.hide()}),$(".fancybox").fancybox();var e=function(){$('[data-phone="true"]').mask("+7 (999) 999-99-99");var t=0;$(document).on("show.bs.modal",".modal",function(e){var a=1040+10*$(".modal:visible").length;$(this).css("z-index",a),t++,setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",a-1).addClass("modal-stack")},0)}),$(document).on("hidden.bs.modal",".modal",function(e){t--,t>0?$("body").addClass("modal-open"):$("body").removeClass("modal-open")}),$("a.smooth").click(function(){return $("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-100},1e3),!1});var e=document.querySelector("svg");e&&!function(){var t=[],a=[],n=e.querySelectorAll(".scale"),o=function(t){var e=t.currentTarget||event.currentTarget;console.log(e)};Array.prototype.forEach.call(n,function(t){a.push(t),t.addEventListener("mouseenter",o,!1)}),t.push.apply(t,a),console.log(t)}();var a={ValidationOptions:{framework:"bootstrap",locale:"ru_RU",fields:{userPhoneNumber:{trigger:"keyup keydown",validators:{callback:{message:"Это не похоже на телефон!",callback:function(t){return/[+][7]\s[()][0-9]{3}[)]\s[0-9]{3}[-][0-9]{2}[-][0-9]{2}/i.test(t)===!0}},notEmpty:{message:"Не заполнено поле «Телефон»"},blank:{}}},userName:{trigger:"keyup keydown",validators:{notEmpty:{message:"Не заполнено поле «ФИО»"},blank:{}}},userAddress:{trigger:"keyup keydown",validators:{notEmpty:{message:"Не заполнено поле «Город»"},blank:{}}},userDirection:{trigger:"keyup keydown",validators:{notEmpty:{message:"Не заполнено поле «Направление»"},blank:{}}},userEmail:{trigger:"keyup keydown",validators:{emailAddress:{message:"Это не похожу на E-mail"},notEmpty:{message:"Не заполнено поле «E-mail»"},blank:{}}},time:{trigger:"keyup keydown change",validators:{notEmpty:{message:"Не заполнено поле «Время»"},blank:{}}}}},initialize:function(){this.Validation("#call2,#call,#thx")},Validation:function(t){$(t).formValidation(this.ValidationOptions).on("success.form.fv",function(t){t.preventDefault();var e=$(t.target);console.log(e),fv=e.data("formValidation"),e.ajaxSubmit({success:function(t,e,a,n){console.log(t,e,a,n),$("#call2").modal("hide"),$("#call").modal("hide"),$("#thx").modal("show")}})})}};a.initialize(),$('button[data-toggle="dropdown"]').on("click",function(t){$(this).next().addClass("opened")})};e()});