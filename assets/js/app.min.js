"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),Filter=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"area",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"area";_classCallCheck(this,t),this.defaultType=n,this.defaultObject=this.getJsonObject(a),this.wrapperFilter=e,this.FormHeader='<form action="" method="" id="filter" class="filter-form">',this.FormFooter='<div class="filter-button">\n\t\t\t\t\t\t\t\t<button class="refresh-button" type="reset">Сбросить</button>\n\t\t\t\t\t\t\t\t<button class="submit-button" type="submit">Найти</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>',this.FormText="",this.bindObjInputs=[],this.PriceObjects=[]}return _createClass(t,[{key:"CreatePriceObject",value:function(t){this.neme=t,this.textFrom=0,this.textTo=0,this.text=""}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultObject,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0;for(var n in t){var i=t[n];if(!i["default"])for(var r in i){var s=i[r];this.PriceObjects[a]={name:s[0].name,textFrom:0,textTo:0,text:""},a++}}if(e&&($(this.wrapperFilter).html(""),this.FormText=""),t.selects)for(var o in t.selects){var l=t.selects[o][0];this.FormText+=this.tmpSelect(l)}if(t.ranges)for(var d in t.ranges){var c=t.ranges[d][0];this.bindObjInputs.push(c),this.FormText+=this.tmpRange(c)}$(this.wrapperFilter).html(this.FormHeader+" "+this.FormText+this.FormFooter),this.Binds(),this.BindListSelect(),this.BindRangeInput(this.bindObjInputs)}},{key:"Binds",value:function(){var t=this,e="";$(this.wrapperFilter+" > form").bind("click",function(a){var n=$(a.target).attr("id")?$(a.target).attr("id"):$(a.target).attr("data-type");n&&("lots"!=n&&"area"!=n||(e=t.getJsonObject(n),t.render(e,1)))}),$(this.wrapperFilter+" > form").find(".refresh-button").bind("click",function(e){t.render(t.defaultObject,1)})}},{key:"BindListSelect",value:function(){$(this.wrapperFilter+" li").on("click",function(t){var e=t.target||window.target,a=$(e).parent(),n=$(e).html(),i=$(this).parent().prev(),r=$(".refresh-button");a.addClass("active"),a.siblings().removeClass("active"),i.html(n+'<span class="my-caret"></span>').prev().val(n),"lots"==$(e).attr("data-type")||"area"==$(e).attr("data-type")?r.hide():r.show()})}},{key:"BindRangeInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,a=t,n=$(".refresh-button");t&&$(""+this.wrapperFilter).on("input","input",function(t){var i=t.target||window.target,r=parseInt(Math.abs($(i).val())),s=$(this).parent().parent().prev(),o="",l="",d="",c="";for(var u in a){var h=a[u];if($(i).attr("data-name")==""+h.name){o=""+h.name,d=h.type;for(var p in e.PriceObjects)h.name==e.PriceObjects[p].name&&(c=p)}if($(i).attr("id")==h.name+"-from"&&(e.PriceObjects[c].textFrom=e.textCombinate("text-from",r)),$(i).attr("id")==h.name+"-up-to"&&(e.PriceObjects[c].textTo=e.textCombinate("text-up-to",r)),c){var m="";e.PriceObjects[c].textFrom&&(m+=e.PriceObjects[c].textFrom+" "+d+" "),e.PriceObjects[c].textTo&&(m+=e.PriceObjects[c].textTo+" "+d),(!e.PriceObjects[c].textFrom&&!e.PriceObjects[c].textTo&&$(i).attr("data-name")==""+h.name||!m&&$(i).attr("data-name")==""+h.name)&&(m=h.name_text+' <span class="my-caret"></span>'),$(i).attr("data-name")==""+h.name&&(o=""+h.name,l=h.name_text+' <span class="my-caret"></span>')}}m?s.html(m):$("#"+o+"Dropdown").html(l),n.show()})}},{key:"textCombinate",value:function(t,e){var a=!1;if("text-from"==t)var n="от";if("text-up-to"==t)var n="до";return!isNaN(e)&&e&&0!=e?(a=n,a+=" "+e):a=!1,a}},{key:"getJsonObject",value:function(t){var e="/assets/js/helpers/"+t+".helper.json",a=new XMLHttpRequest;return a.open("GET",e,!1),a.send(),200==a.status&&JSON.parse(a.responseText)}},{key:"tmpSelect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="",a="",n=Object.keys(t.values);if(t&&t.values)if("type"==t.name){if("none"!=this.defaultType){if("area"==n[0]){var i='<li class="active"><a href="#" data-type="area" data-name="'+t.values.area+'">'+t.values.area+'</a></li>\n\t\t\t\t\t\t\t\t\t\t<li><a href="#" data-type="lots" data-name="'+t.values.lots+'">'+t.values.lots+"</a></li>";a=i}else if("lots"==n[0]){var r='<li><a href="#" data-type="area" data-name="'+t.values.area+'">'+t.values.area+'</a></li>\n\t\t\t\t\t\t\t\t\t\t\t<li class="active"><a href="#" data-type="lots" data-name="'+t.values.lots+'">'+t.values.lots+"</a></li>";a=r}e='<div class="dropdown">\n\t\t\t\t\t\t\t\t<input type="text" name="'+t.name+'" value="'+t.name_text+'" class="hidden">\n\t\t\t\t\t\t\t\t<button class="btn btn-filter btn-lg dropdown-toggle" type="button" id="'+t.name+'Dropdown" data-placeholder="'+t.name_text+'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t\t\t'+t.name_text+'\n\t\t\t\t\t\t\t\t\t<span class="my-caret"></span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<ul class="dropdown-menu" aria-labelledby="dropdownRoad">\n\t\t\t\t\t\t\t\t\t<span class="arrow-top"></span>\n\t\t\t\t\t\t\t\t\t'+a+"\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>"}}else{for(var s in t.values){var o='<li><a href="#" data-name="'+t.values[s]+'">'+t.values[s]+"</a></li>";a+=o}e='<div class="dropdown">\n\t\t\t\t\t\t\t\t<input type="text" name="'+t.name+'" value="" class="hidden">\n\t\t\t\t\t\t\t\t<button class="btn btn-filter btn-lg dropdown-toggle" type="button" id="'+t.name+'Dropdown" data-placeholder="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t\t\t'+t.name_text+'\n\t\t\t\t\t\t\t\t\t<span class="my-caret"></span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<ul class="dropdown-menu" aria-labelledby="dropdownRoad">\n\t\t\t\t\t\t\t\t\t<span class="arrow-top"></span>\n\t\t\t\t\t\t\t\t\t'+a+"\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>"}return e}},{key:"tmpRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=null;return t.values&&(e='<div class="dropdown">\n\t\t\t\t\t\t<input type="text" name="'+t.name+'" value="" class="hidden">\n\t\t\t\t\t\t<button class="btn btn-filter btn-lg dropdown-toggle" type="button" id="'+t.name+'Dropdown" data-placeholder="Удаленность от МКАД" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t'+t.name_text+'\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div class="dropdown-menu" aria-labelledby="'+t.name+'Dropdown">\n\t\t\t\t\t\t\t<span class="arrow-top"></span>\n\t\t\t\t\t\t\t<div class="range-box">\n\t\t\t\t\t\t\t\t<input type="number" name="'+t.name+'From" data-name="'+t.name+'" id="'+t.name+'-from" placeholder="'+t.min_text+" "+t.values.min+'">\n\t\t\t\t\t\t\t\t<span> - </span>\n\t\t\t\t\t\t\t\t<input type="number" name="'+t.name+'Upto" data-name="'+t.name+'" id="'+t.name+'-up-to" placeholder="'+t.max_text+" "+t.values.max+'">\n\t\t\t\t\t\t\t\t<span>'+t.type+"</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>"),e}}]),t}(),Slider=function(){function t(e,a,n,i){_classCallCheck(this,t),this.Toggler="#"+n+"-button",this.SliderNav="."+n+"-slider-nav",this.Slider=$('[data-item="'+e+'"]').owlCarousel({loop:!0,margin:1,items:i||1,nav:!0,navContainer:"."+a,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0}),$(this.Slider).hide(),$(this.SliderNav).hide()}return _createClass(t,[{key:"initToggler",value:function(t){$("#"+t).on("click",function(){var t=$(this).attr("id");"#"+t==SliderArea.Toggler?(SliderLot.hideSlider(),SliderArea.showSlider()):(SliderLot.showSlider(),SliderArea.hideSlider())})}},{key:"onResize",value:function(){function t(t){var e=t.item.count;console.log(e)}$(this.Slider).owlCarousel({onResize:t})}},{key:"activeStateSlider",value:function(){$(this.Slider).show(),$(this.SliderNav).show()}},{key:"activeToggler",value:function(){$(this.Toggler).addClass("success")}},{key:"hideSlider",value:function(){$(this.Toggler).removeClass("success"),$(this.Slider).hide("drop","easeInQuad",200,!1),$(this.SliderNav).hide()}},{key:"showSlider",value:function(){this.Slider.trigger("initialize.owl.carousel"),$(this.Toggler).addClass("success"),$(this.Slider).show("drop","easeInQuad",200,!1),$(this.SliderNav).show()}}]),t}();!function(){var t=function(){function t(e,a,n,i){_classCallCheck(this,t),this.Toggler="#"+n+"-button",this.SliderNav="."+n+"-slider-nav",this.Slider=$('[data-item="'+e+'"]').owlCarousel({loop:!0,margin:1,items:i||1,nav:!0,navContainer:"."+a,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0}),$(this.Slider).hide(),$(this.SliderNav).hide()}return _createClass(t,[{key:"initToggler",value:function(t){$("#"+t).on("click",function(){var t=$(this).attr("id");"#"+t==a.Toggler?(n.hideSlider(),a.showSlider()):(n.showSlider(),a.hideSlider())})}},{key:"onResize",value:function(){function t(t){var e=t.item.count;console.log(e)}$(this.Slider).owlCarousel({onResize:t})}},{key:"activeStateSlider",value:function(){$(this.Slider).show(),$(this.SliderNav).show()}},{key:"activeToggler",value:function(){$(this.Toggler).addClass("success")}},{key:"hideSlider",value:function(){$(this.Toggler).removeClass("success"),$(this.Slider).hide("drop","easeInQuad",200,!1),$(this.SliderNav).hide()}},{key:"showSlider",value:function(){this.Slider.trigger("initialize.owl.carousel"),$(this.Toggler).addClass("success"),$(this.Slider).show("drop","easeInQuad",200,!1),$(this.SliderNav).show()}}]),t}(),e=new t("promo-slider","promo-slider-nav");e.activeStateSlider();var a=new t("offer-area-slider","offer-area-slider-nav","offer-area",4);a.activeStateSlider(),a.activeToggler(),a.initToggler("offer-area-button");var n=new t("offer-lot-slider","offer-lot-slider-nav","offer-lot",4);n.initToggler("offer-lot-button");var i=new t("details-slider","details-slider-nav");i.activeStateSlider()}(),$(document).ready(function(){var t=$(".header__content");t.addClass("opened"),$(window).on("scroll",function(){t.hide()}),$(".fancybox").fancybox(),$(document).on("click",'[data-toggle="dropdown"]',function(t){$(this).next().addClass("opened"),$(this).parent().siblings(".dropdown").children("button").children(".my-caret").removeClass("animated"),"true"==$(this).attr("aria-expanded")?$(this).children(".my-caret").addClass("animated"):$(this).children(".my-caret").removeClass("animated")}),$(document).on("click","[data-phone-link]",function(t){$(this).hide(),$(this).prev().hide(),$(this).next().show(),$(this).parent().css("border",0)});var e=function(){$('[data-phone="true"]').mask("+7 (999) 999-99-99");var t=0;$(document).on("show.bs.modal",".modal",function(e){var a=1040+10*$(".modal:visible").length;$(this).css("z-index",a),t++,setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",a-1).addClass("modal-stack")},0)}),$(document).on("hidden.bs.modal",".modal",function(e){t--,t>0?$("body").addClass("modal-open"):$("body").removeClass("modal-open")}),$("a.smooth").click(function(){return $("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-100},1e3),!1});var e=document.querySelector("svg");e&&!function(){var t=[],a=[],n=e.querySelectorAll(".scale"),i=function(t){var e=t.currentTarget||event.currentTarget;console.log(e)};Array.prototype.forEach.call(n,function(t){a.push(t),t.addEventListener("mouseenter",i,!1)}),t.push.apply(t,a),console.log(t)}();var a={ValidationOptions:{framework:"bootstrap",locale:"ru_RU",fields:{userPhoneNumber:{trigger:"keyup keydown",validators:{callback:{message:"Это не похоже на телефон!",callback:function(t){return/[+][7]\s[()][0-9]{3}[)]\s[0-9]{3}[-][0-9]{2}[-][0-9]{2}/i.test(t)===!0}},notEmpty:{message:"Не заполнено поле «Телефон»"},blank:{}}},userName:{trigger:"keyup keydown",validators:{notEmpty:{message:"Не заполнено поле «ФИО»"},blank:{}}},userAddress:{trigger:"keyup keydown",validators:{notEmpty:{message:"Не заполнено поле «Город»"},blank:{}}},userDirection:{trigger:"keyup keydown",validators:{notEmpty:{message:"Не заполнено поле «Направление»"},blank:{}}},userEmail:{trigger:"keyup keydown",validators:{emailAddress:{message:"Это не похожу на E-mail"},notEmpty:{message:"Не заполнено поле «E-mail»"},blank:{}}},time:{trigger:"keyup keydown change",validators:{notEmpty:{message:"Не заполнено поле «Время»"},blank:{}}}}},initialize:function(){this.Validation("#call2,#call,#thx")},Validation:function(t){$(t).formValidation(this.ValidationOptions).on("success.form.fv",function(t){t.preventDefault();var e=$(t.target);console.log(e),fv=e.data("formValidation"),e.ajaxSubmit({success:function(t,e,a,n){console.log(t,e,a,n),$("#call2").modal("hide"),$("#call").modal("hide"),$("#thx").modal("show")}})})}};a.initialize()};e()});